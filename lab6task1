#include <iostream>
#include <queue>
using namespace std;

#define SIZE 8
#define INF 999999999

typedef pair<int, int> PQElement;

int matrix[SIZE][SIZE] = {
    {INF, 2,   7,   5,   INF, INF, 10,  INF},
    {2,   INF, INF, INF, 8,   INF, INF, INF},
    {7,   INF, INF, INF, INF, 5,   9,   INF},
    {5,   INF, INF, INF, 6,   4,   4,   INF},
    {INF, 8,   INF, 6,   INF, 3,   INF, 3},
    {INF, INF, 5,   4,   3,   INF, INF, 1},
    {10,  INF, 9,   4,   INF, INF, INF, 6},
    {INF, INF, INF, INF, 3,   1,   6,   INF}
};

void Dijkstra(int start, int pred[], int dist[]) {
    bool used[SIZE];
    priority_queue<PQElement, vector<PQElement>, greater<PQElement>> pq;

    for (int i = 0; i < SIZE; i++) {
        dist[i] = INF;
        pred[i] = -1;
        used[i] = false;
    }

    dist[start] = 0;
    pq.push({ 0, start });

    while (!pq.empty()) {
        int u = pq.top().second;
        pq.pop();

        if (used[u]) continue;
        used[u] = true;

        for (int v = 0; v < SIZE; v++) {
            if (matrix[u][v] < INF && !used[v]) {
                if (dist[v] > dist[u] + matrix[u][v]) {
                    dist[v] = dist[u] + matrix[u][v];
                    pred[v] = u;
                    pq.push({ dist[v], v });
                }
            }
        }
    }
}

void printPath(int v, int pred[]) {
    if (pred[v] == -1) {
        cout << v + 1;
        return;
    }
    printPath(pred[v], pred);
    cout << " - " << v + 1;
}

int main() {
    int pred[SIZE];
    int dist[SIZE];
    int start = 0;

    Dijkstra(start, pred, dist);

    cout << "Start vertex: 1\n\n";
    cout << "From vertex | To vertex | Path                | Weight\n";
    cout << "-------------------------------------------------------\n";

    for (int i = 1; i < SIZE; i++) {
        if (i == 1)
            cout << "1           | ";
        else
            cout << "            | ";

        cout << i + 1 << "         | ";
        printPath(i, pred);

        if (i == 2 || i == 3)
            cout << "           | ";
        else if (i == 4 || i == 5)
            cout << "       | ";
        else
            cout << "      | ";

        cout << dist[i] << endl;
    }

    return 0;
}
